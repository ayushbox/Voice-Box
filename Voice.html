<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GLA - IntegraMinds Fullstack</title>
  <link rel="icon" type="image/svg+xml" href="https://d2qarrg319cj9i.cloudfront.net/SAMMXP2PB2.png" />
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f9f9f9;
      color: #333;
      margin: 0;
      padding: 0;
    }

    header {
      background-color: #11ca48;
      color: white;
      padding: 20px;
      text-align: center;
    }

    .container {
      width: 90%;
      margin: auto;
      max-width: 1200px;
    }

    h1 {
      font-size: 24px;
    }

    .card {
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-top: 20px;
    }

    .card h2 {
      font-size: 20px;
      margin-bottom: 10px;
    }

    .form-input input, .form-input select, .form-input textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ddd;
    }

    .form-input button {
      padding: 12px 25px;
      background-color: #2980b9;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .form-input button:hover {
      background-color: #1f5c87;
    }

    .dashboard {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 30px;
    }

    .dashboard .card {
      flex: 1;
      max-width: 45%;
    }

    .complaint-list {
      margin-top: 20px;
    }

    .complaint-list table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .complaint-list th, .complaint-list td {
      border: 1px solid #ddd;
      padding: 10px;
    }

    .complaint-list th {
      background-color: #3498db;
      color: white;
    }

    .status-updates {
      margin-top: 20px;
    }

    .status-updates div {
      padding: 10px;
      background-color: #ecf0f1;
      margin-bottom: 10px;
      border-left: 5px solid #3498db;
    }

    /* New Resolved Complaints Section */
    .resolved-section {
      background-color: #f0f9e8;
      border-radius: 10px;
      padding: 20px;
      margin-top: 30px;
    }

    .resolved-section h2 {
      color: #27ae60;
    }

    .resolved-list table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    .resolved-list th, .resolved-list td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }

    .resolved-list th {
      background-color: #27ae60;
      color: white;
    }

    .resolved-list td {
      background-color: #ecf9e6;
    }

    .resolved-list .time, .resolved-list .accuracy {
      font-weight: bold;
      color: #2ecc71;
    }
  </style>
</head>
<body>

  <header>
    <h1>Complaint Management System & Voice Box</h1>
  </header>

  <div class="container">
    <!-- Complaint Form Section -->
    <div class="card">
      <h2>User Registration & Complaint Form</h2>
      <form id="complaintForm" class="form-input">
        <input type="text" id="fullName" placeholder="Full Name" required>
        <input type="email" id="email" placeholder="Email" required>
        <select id="complaintType" required>
          <option value="">Select Complaint Type</option>
          <option value="Technical Issue">Technical Issue</option>
          <option value="Service Complaint">Service Complaint</option>
          <option value="Other">Other</option>
        </select>
        <textarea id="complaintDesc" rows="5" placeholder="Complaint Description"></textarea>
        <button type="submit">Submit Complaint</button>
      </form>
    </div>

    <!-- Dashboard Section -->
    <div class="dashboard">
      <div class="card">
        <h2>Complaint Tracking & Status</h2>
        <div class="status-updates" id="statusUpdates">
        </div>
      </div>
      <div class="card">
        <h2>Complaint Analytics Dashboard</h2>
        <p id="totalComplaints">Total Complaints: 0</p>
        <p id="resolvedComplaints">Resolved Complaints: 0</p>
        <p id="pendingComplaints">Pending Complaints: 0</p>
        <p id="inProgressComplaints">In Progress Complaints: 0</p>
      </div>
    </div>

    <!-- Complaint List -->
    <div class="complaint-list">
      <h2>Admin Complaint Management & Search</h2>
      <input type="text" id="searchBox" placeholder="Search Complaints...">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>User</th>
            <th>Complaint</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="complaintList"></tbody>
      </table>
    </div>

    <!-- Resolved Complaints Section -->
    <div class="resolved-section">
      <h2>Resolved Complaints</h2>
      <div class="resolved-list">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>User</th>
              <th>Type</th>
              <th>Completion Time</th>
              <th>Accuracy</th>
            </tr>
          </thead>
          <tbody id="resolvedList"></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    let complaints = [];
    let complaintId = 1;

    document.getElementById('complaintForm').addEventListener('submit', function(e) {
      e.preventDefault();

      const fullName = document.getElementById('fullName').value;
      const email = document.getElementById('email').value;
      const complaintType = document.getElementById('complaintType').value;
      const complaintDesc = document.getElementById('complaintDesc').value;

      const complaint = {
        id: complaintId++,
        user: fullName,
        email: email,
        type: complaintType,
        description: complaintDesc,
        status: 'Pending',
        submittedAt: new Date(),
        resolvedAt: null
      };

      complaints.push(complaint);

      updateComplaintList();
      updateAnalytics();
      addStatusUpdate(complaint);
      document.getElementById('complaintForm').reset();
    });

    function updateComplaintList() {
      const complaintList = document.getElementById('complaintList');
      complaintList.innerHTML = '';

      complaints.forEach(complaint => {
        const row = `
          <tr>
            <td>${complaint.id}</td>
            <td>${complaint.user}</td>
            <td>${complaint.type}</td>
            <td>${complaint.status}</td>
            <td>
              <button onclick="viewComplaint(${complaint.id})">View</button>
              <button onclick="markAsDone(${complaint.id})">Mark as Done</button>
            </td>
          </tr>
        `;
        complaintList.innerHTML += row;
      });
    }

    function addStatusUpdate(complaint) {
      const statusUpdates = document.getElementById('statusUpdates');
      const update = `<div>Complaint #${complaint.id} - Status: ${complaint.status}</div>`;
      statusUpdates.innerHTML += update;
    }

    function markAsDone(id) {
      const complaint = complaints.find(c => c.id === id);
      if (complaint && complaint.status !== 'Resolved') {
        complaint.status = 'Resolved';
        complaint.resolvedAt = new Date();
        addResolvedComplaint(complaint);
        updateAnalytics();
        updateComplaintList();
        updateStatusTracking(complaint); // Update the status
      }
    }

    function updateAnalytics() {
      const totalComplaints = complaints.length;
      const resolvedComplaints = complaints.filter(c => c.status === 'Resolved').length;
      const pendingComplaints = complaints.filter(c => c.status === 'Pending').length;
      const inProgressComplaints = complaints.filter(c => c.status === 'In Progress').length;

      document.getElementById('totalComplaints').innerText = `Total Complaints: ${totalComplaints}`;
      document.getElementById('resolvedComplaints').innerText = `Resolved Complaints: ${resolvedComplaints}`;
      document.getElementById('pendingComplaints').innerText = `Pending Complaints: ${pendingComplaints}`;
      document.getElementById('inProgressComplaints').innerText = `In Progress Complaints: ${inProgressComplaints}`;
    }

    function addResolvedComplaint(complaint) {
      const resolvedList = document.getElementById('resolvedList');
      const completionTime = calculateCompletionTime(complaint.submittedAt, complaint.resolvedAt);
      const accuracy = calculateAccuracy(); // Replace with actual logic

      const row = `
        <tr>
          <td>${complaint.id}</td>
          <td>${complaint.user}</td>
          <td>${complaint.type}</td>
          <td class="time">${completionTime} hours</td>
          <td class="accuracy">${accuracy}%</td>
        </tr>
      `;

      resolvedList.innerHTML += row;
    }

    function calculateCompletionTime(start, end) {
      const diff = Math.abs(end - start);
      const hours = Math.floor(diff / 36e5); // Convert ms to hours
      return hours;
    }

    function calculateAccuracy() {
      return Math.floor(Math.random() * (95 - 85 + 1)) + 85; // Dummy accuracy logic
    }

    function viewComplaint(id) {
      const complaint = complaints.find(c => c.id === id);
      alert(`Complaint #${complaint.id}\nUser: ${complaint.user}\nType: ${complaint.type}\nStatus: ${complaint.status}\nDescription: ${complaint.description}`);
    }

    function updateStatusTracking(complaint) {
      const statusUpdates = document.getElementById('statusUpdates');
      const update = `<div>Complaint #${complaint.id} - Status Updated to: ${complaint.status}</div>`;
      statusUpdates.innerHTML += update;
    }
  </script>
</body>
</html>
